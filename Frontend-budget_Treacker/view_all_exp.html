<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Expenses</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="showexp">
        <h2>All Expenses</h2>
        <ul id="expenseList">[Expenses will be listed here]</ul>
    </div>
    <script>
window.onload = function() {
    const userId = localStorage.getItem("user_id");

    if (!userId) {
        alert("You must be logged in.");
        window.location.href = "index.html"; // Redirect to login page if not logged in
        return;
    }

    fetch(`http://localhost:8080/all_expenses`, {
        method: "GET"
    })
    .then(response => response.json())
    .then(expenses => {
        if (expenses.length === 0) {
            document.getElementById("expenseList").innerHTML = "<li>No expenses recorded yet.</li>";
            return;
        }

        const expenseList = document.getElementById("expenseList");
        expenses.forEach(expense => {
            const expenseItem = document.createElement("li");
            expenseItem.textContent = `${expense.name}: $${expense.amount}`;
            expenseList.appendChild(expenseItem);
        });
    })
    .catch(error => {
        console.error("Error fetching expenses:", error);
        alert("‚ùå Error fetching expenses");
    });
};
</script>

</body>
</html>